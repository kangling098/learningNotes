(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[11],{"06aK":function(a,e,t){"use strict";var n=t("TqRt"),r=t("284h");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var l,i,o,u=n(t("lwsE")),s=n(t("W8MJ")),d=n(t("a1gu")),c=n(t("Nsbk")),m=n(t("7W2i")),f=r(t("q1tI")),_=(n(t("17x9")),n(t("0BT5"))),p=n(t("QvT+")),v=n(t("Y+p1")),y=n(t("kd65")),b=(l=(0,_.default)(),l((o=function(a){function e(){var a,t;(0,u.default)(this,e);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return t=(0,d.default)(this,(a=(0,c.default)(e)).call.apply(a,[this].concat(r))),t.state={data:[]},t}return(0,m.default)(e,a),(0,s.default)(e,[{key:"render",value:function(){var a=this.state.data,e=a.length;return f.default.createElement("div",{className:y.default.cardGroup},a.map(function(a,t){var n={float:"left",width:"".concat(100/e,"%"),borderRight:t===e-1?"0 none":"1px solid #EAEAEA"};return f.default.createElement(p.default,{key:"".concat(y.default.cardGroup,"-indicator-card-").concat(a.title,"-").concat(t),title:a.title,value:a.value,style:n})}))}}],[{key:"getDerivedStateFromProps",value:function(a,t){var n=e.generateData(a.analysisData);return(0,v.default)(n,t.data)?null:{data:n}}},{key:"generateData",value:function(a){var e=a.dim_fields,t=void 0===e?[]:e,n=a.num_fields,r=void 0===n?[]:n,l=a.data,i=void 0===l?[]:l,o=[].concat(t,r);return o.map(function(a){var e=i.map(function(e){return e[a.alias]}).reduce(function(a,e){return a+e});return"function"===typeof a.formatter&&(e=a.formatter(e)),{title:a.alias,value:e}})}}]),e}(f.PureComponent),i=o))||i),h=b;e.default=h},i6ay:function(a,e,t){"use strict";var n=t("TqRt"),r=t("284h");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var l,i,o,u=n(t("MVZn")),s=n(t("lwsE")),d=n(t("W8MJ")),c=n(t("a1gu")),m=n(t("Nsbk")),f=n(t("7W2i")),_=r(t("q1tI")),p=n(t("O8Rh")),v=t("q4CN"),y=n(t("Kr6O")),b=n(t("1UQL")),h=n(t("IgyS")),E=n(t("ZfYN")),x=n(t("06aK")),g=n(t("Gmu2")),A=n(t("EGzU")),w=n(t("0O5e")),M=n(t("J2m7")),O="api_error",D=(l=(0,p.default)(),l((o=function(a){function e(){var a,t;(0,s.default)(this,e);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return t=(0,c.default)(this,(a=(0,m.default)(e)).call.apply(a,[this].concat(r))),t.explandRowRender=function(a,e){var n=[{name:"\u79df\u6237TOP10",key:"tenant_top_10",title:"\u79df\u6237API\u5f02\u5e38TOP10"},{name:"\u8d8b\u52bf",key:"trend",title:"API\u5f02\u5e38\u8d8b\u52bf"}],r=t.props.isSaasApp,l=e.date_unit,i=e.from_date,o=e.to_date,s=e.order_by,d=e.num_fields,c=e.dim_fields,m=e.tenantCode,f=c[0],p={date_unit:l,from_date:i,to_date:o,order_by:s,filter:["".concat(f.name,"$eq(").concat(a[f.alias],")")]};if(Array.isArray(s)&&s.length>0){var y=s[0].split("$")[0],b=(0,M.default)(d,function(a){return a.alias===y});b&&(n[0].title="\u79df\u6237".concat(b.alias,"TOP10"),p.extra_num_field=(0,u.default)({},b),p.order_by=[s[0]])}return _.default.createElement(w.default,{name:"".concat(O,"_list_detail_").concat(a.key),analysisModel:O,DataModel:v.ApiErrorExplandDetail,params:p,tabPreferKey:"".concat(O,"::tab-prefer"),tabs:r&&!m?n:[n[1]]},_.default.createElement(E.default,{chartHeight:"280px"}))},t}return(0,f.default)(e,a),(0,d.default)(e,[{key:"render",value:function(){return _.default.createElement(y.default,{navTitle:"API\u8bf7\u6c42\u5f02\u5e38"},_.default.createElement(b.default,{title:"\u6982\u89c8"},_.default.createElement(A.default,{analysisModel:O,name:"".concat(O,"_overview_filter"),dataModels:[{name:"".concat(O,"_overview"),DataModel:v.ApiErrorOverview,paginationable:!1,component:_.default.createElement(x.default,null),style:{minHeight:"64px",padding:0}}],contentStyle:{height:"88px",minHeight:"88px",padding:"0 0 24px"}})),_.default.createElement(b.default,{title:"API\u5f02\u5e38\u5217\u8868"},_.default.createElement(A.default,{analysisModel:O,name:"".concat(O,"_list_filter"),searchPlaceHolder:"\u8bf7\u8f93\u5165API",openSearch:!0,disableNoDataStatus:!0,dataModels:[{name:"".concat(O,"_list"),DataModel:v.ApiErrorList,paginationable:!0,component:_.default.createElement(h.default,{explandRowRender:this.explandRowRender,detailDialogRender:e.detailDialogRender})}]})))}}],[{key:"detailDialogRender",value:function(a,e){var t=e.name,n=e.date_unit,r=e.from_date,l=e.to_date,i=e.dim_fields,o=e.appCode,u=e.tenantCode,s=i[0],d=a.rowData[s.alias],c={date_unit:n,from_date:r,to_date:l,appCode:o,tenantCode:u,filter:["".concat(s.name,"$eq(").concat(d,")")]};return _.default.createElement(g.default,{analysisModel:O,name:"".concat(t,"_detail_").concat(d),paginationable:!0,DataModel:a.DataModel,show:a.show,onCancel:a.onCancel,params:c,title:"\u5f71\u54cd\u7528\u6237"},_.default.createElement(h.default,null))}}]),e}(_.PureComponent),i=o))||i),P=D;e.default=P},kd65:function(a,e,t){a.exports={cardGroup:"cardGroup___3tHQn"}},q4CN:function(a,e,t){"use strict";var n=t("TqRt");Object.defineProperty(e,"__esModule",{value:!0}),e.ApiErrorExplandDetail=e.ApiErrorList=e.ApiErrorUserList=e.ApiErrorOverview=void 0;var r=n(t("RIqP")),l=n(t("QILm")),i=n(t("MVZn")),o=n(t("lwsE")),u=t("zLPB"),s=t("Zf/7"),d=n(t("mwIZ")),c={hour:"hour",day:"dt"},m="\u79df\u6237",f="\u552f\u4e00\u6807\u8bc6",_="\u771f\u5b9e\u7528\u6237",p="\u65f6\u95f4",v="API",y="\u8bf7\u6c42\u603b\u6570",b="\u5f02\u5e38\u8bf7\u6c42\u5360\u6bd4",h="\u5f02\u5e38\u8bf7\u6c42\u603b\u6570",E="\u5185\u90e8\u5f02\u5e38",x="\u670d\u52a1\u4e2d\u65ad",g="\u670d\u52a1\u4e0d\u53ef\u7528",A="\u8bf7\u6c42\u8d85\u65f6",w="\u5f71\u54cd\u7528\u6237\u6570",M=function a(){return(0,o.default)(this,a),{num_fields:[{alias:"".concat(E,"\uff08500\uff09"),name:"status_500",fomula:"sum"},{alias:"".concat(x,"\uff08502\uff09"),name:"status_502",fomula:"sum"},{alias:"".concat(g,"\uff08503\uff09"),name:"status_503",fomula:"sum"},{alias:"".concat(A,"\uff08504\uff09"),name:"status_504",fomula:"sum"},{alias:b,operator:"/",name:"incorrect_total",fomula:"sum",sub_name:"total",sub_fomula:"sum",sub_trans:"numeric",formatter:u.percentFormatter}]}};e.ApiErrorOverview=M;var O=function a(e){return(0,o.default)(this,a),(0,i.default)({page:1,page_size:10,model_type:s.MODE_TYPES.fct,dim_fields:[{alias:m,name:"tenant"},{alias:_,name:"real_user_id"},{alias:f,name:"user_id"},{alias:p,name:"request_time",formatter:function(a){return(0,u.dateFormatter)(1e3*a,"YYYY.MM.DD HH:MM:SS")}}],order_by:["".concat(p,"$desc"),"".concat(m,"$asc"),"".concat(_,"$asc"),"".concat(f,"$asc")]},e)};e.ApiErrorUserList=O;var D=function a(e){var t=e.keyword;return(0,o.default)(this,a),{page:1,page_size:10,static_sort:"".concat(v,"$asc"),dim_fields:[{alias:v,name:"api"}],num_fields:[{alias:E,name:"status_500",sortable:!0,fomula:"sum",axisNameObj:{name:"\u6b21\u6570"}},{alias:x,name:"status_502",sortable:!0,fomula:"sum",axisNameObj:{name:"\u6b21\u6570"}},{alias:g,name:"status_503",sortable:!0,fomula:"sum",axisNameObj:{name:"\u6b21\u6570"}},{alias:A,name:"status_504",sortable:!0,fomula:"sum",axisNameObj:{name:"\u6b21\u6570"}},{alias:b,operator:"/",name:"incorrect_total",fomula:"sum",sub_fomula:"sum",sub_name:"total",sub_trans:"numeric",sortable:!0,formatter:u.percentFormatter,axisNameObj:{name:""}},{alias:h,name:"incorrect_total",sortable:!0,defaultSort:"desc",fomula:"sum",axisNameObj:{name:"\u6b21\u6570"}},{alias:y,name:"total",sortable:!0,fomula:"sum",axisNameObj:{name:"\u6b21\u6570"}},{alias:w,name:"users",sortable:!0,fomula:"sum",dialogDetail:O,axisNameObj:{name:"\u7528\u6237\u6570"}}],filter:t?["api$lk(".concat(t,")")]:[]}};e.ApiErrorList=D;var P=function a(e,t){var n=e.extra_num_field,u=e.date_unit,s=e.order_by,f=e.filter,_=(0,l.default)(e,["extra_num_field","date_unit","order_by","filter"]);(0,o.default)(this,a);var v={tenant_top_10:{filter:["tenant$isnet()"].concat((0,r.default)(f)),page:1,page_size:10,chart_type:"barlike_horizon",grid:{left:"10%",right:"10%"},dim_fields:[{alias:m,name:"tenant"}],num_fields:[{alias:h,name:"incorrect_total",fomula:"sum"}],value_axis:[{}]},trend:{filter:f,dim_fields:[{alias:p,name:c[u],data_fill:!0}],num_fields:[{alias:h,name:"incorrect_total",fomula:"sum",type:"line"},{alias:w,name:"users",fomula:"sum",yAxisIndex:1,type:"line"}],order_by:["".concat(p,"$asc")],tooltip:{axisPointer:{type:"line",lineStyle:{color:"#8C9BA5",opacity:.6}}},value_axis:[{name:"\u6b21\u6570"},{name:"\u7528\u6237\u6570",splitLine:{show:!1}}],category_axis:{axisLabel:{interval:"auto"}}}},y=(0,i.default)({date_unit:u},_,v[t]);if("trend"!==t&&n){y.num_fields=[n],y.order_by=s;var b=(0,d.default)(n,"axisNameObj",(0,d.default)(y,"value_axis[0]",{name:""}));y.value_axis[0]=b}return y};e.ApiErrorExplandDetail=P}}]);