(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[36],{"1UQL":function(t,e,a){"use strict";a("+L6B");var n=a("2/Rp"),r=a("2Taf"),i=a.n(r),l=a("vZ4D"),o=a.n(l),s=a("l4Ni"),c=a.n(s),d=a("ujKo"),u=a.n(d),m=a("MhPg"),f=a.n(m),y=a("q1tI"),p=a.n(y),_=(a("17x9"),a("t0Ix")),h=a.n(_),v=function(t){function e(){return i()(this,e),c()(this,u()(e).apply(this,arguments))}return f()(e,t),o()(e,[{key:"render",value:function(){var t=this.props,e=t.children,a=t.title,r=t.exportable,i=t.style;return p.a.createElement("div",{className:h.a.block,style:i},a&&p.a.createElement("div",{className:h.a.title},p.a.createElement("span",null,a),r&&p.a.createElement(n["a"],{className:h.a.exportBtn,type:"normal",shape:"circle",icon:"download",size:"small"})),e)}}]),e}(y["PureComponent"]);v.defaultProps={style:{},exportable:!1},e["a"]=v},HyuU:function(t,e,a){"use strict";a.r(e);var n,r,i,l,o,s,c=a("2Taf"),d=a.n(c),u=a("vZ4D"),m=a.n(u),f=a("l4Ni"),y=a.n(f),p=a("ujKo"),_=a.n(p),h=a("MhPg"),v=a.n(h),x=a("q1tI"),g=a.n(x),E=a("O8Rh"),k=a("Zf/7"),S={user_id:{total:"total",retention:"retention"},real_user_id:{total:"real_total",retention:"real_retention"}},b="date",w="total",D="retention",I="day",z=[{key:"filter",text:"7\u65e5\u7559\u5b58",data:["day$lt(8)"]},{key:"filter",text:"14\u65e5\u7559\u5b58",data:["day$lt(15)"]},{key:"filter",text:"30\u65e5\u7559\u5b58",data:["day$lt(31)"]}],P=function t(e){var a=e.userIdentityType,n=void 0===a?"user_id":a;return d()(this,t),{model_type:k["f"].adm,dim_fields:[],date_unit:"day",num_fields:[{alias:w,name:S[n].total,fomula:""},{alias:D,name:S[n].retention},{alias:I,name:"day"},{alias:b,name:"dt"}],filter:["day$lt(8)"]}},T=a("Kr6O"),N=a("1UQL"),j=(a("g9YV"),a("wCAj")),O=a("gWZ8"),C=a.n(O),B=a("0BT5"),M=a("zLPB"),R=a("Y+p1"),A=a.n(R),$=a("mwIZ"),U=a.n($),W=a("wd/R"),Z=a.n(W),K=a("o0iW"),L=a.n(K),q=(n=Object(B["a"])(),n((l=i=function(t){function e(){var t,a;d()(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return a=y()(this,(t=_()(e)).call.apply(t,[this].concat(r))),a.state={pageSize:10,current:1,analysisData:{data:[]}},a}return v()(e,t),m()(e,[{key:"render",value:function(){var t=this,e=this.state.analysisData,a=e.data,n=e.filter,r=void 0===n?["day$lt(15)"]:n,i=r[0].match(/day\$lt\((\d*)\)/)[1]-1,l=Array(i).fill(0).map(function(t,e){return{title:function(){return g.a.createElement("div",{style:{minWidth:"166px"}},"\u7b2c".concat(e+1,"\u5929"))},dataIndex:e+1,key:"time-".concat(e),align:"center",render:function(t,e){return t||0===t?g.a.createElement("div",{className:L.a.item},g.a.createElement("div",{className:L.a.itemText},Object(M["f"])(t)),g.a.createElement("div",{className:L.a.itemPercent},Object(M["g"])(t/e.total))):g.a.createElement("div",{className:L.a.empty},"\xa0")}}}),o=[{title:"\u65e5\u671f",dataIndex:"date",key:"date",fixed:"left",align:"center",width:80,render:function(t){return g.a.createElement("div",{className:L.a.tdItem},Z()(t).format("MM/DD"))}},{title:"\u603b\u7528\u6237",dataIndex:"total",key:"total",width:80,align:"center",fixed:"left",render:function(t){return g.a.createElement("div",{className:L.a.tdItem},Object(M["f"])(t))}}].concat(C()(l)),s={};a.forEach(function(t){s[t.date]=Array.isArray(s[t.date])?[].concat(C()(s[t.date]),[t]):[t]});var c=Object.keys(s).map(function(t){var e={};return e.date=t,e.total=U()(s[t],"[0].total",0),s[t].forEach(function(t){e[t.day]=t.retention||0}),e});return g.a.createElement(j["a"],{className:L.a.RetentionTable,dataSource:c.slice((this.state.current-1)*this.state.pageSize,this.state.current*this.state.pageSize),columns:o,scroll:{x:1200},pagination:{current:this.state.current,total:Object.keys(s).length,pageSize:this.state.pageSize,pageSizeOptions:["10","20","30","50"],showSizeChanger:!0,onShowSizeChange:function(e,a){t.setState({current:1,pageSize:a})},onChange:function(e){t.setState({current:e})}},rowKey:function(t){return t.date}})}}],[{key:"getDerivedStateFromProps",value:function(t,e){var a=U()(t,"analysisData.data"),n=U()(e,"analysisData.data"),r=U()(t,"analysisData.filter"),i=U()(t,"analysisData.filter"),l=!A()(n,a),o=!A()(r,i);return l||o?{current:1,analysisData:{data:a,filter:r}}:null}}]),e}(x["PureComponent"]),i.defaultProps={analysisData:{data:[]}},r=l))||r),V=q,F=a("EGzU"),H="user_retention",J=(o=Object(E["a"])(),o(s=function(t){function e(){return d()(this,e),y()(this,_()(e).apply(this,arguments))}return v()(e,t),m()(e,[{key:"render",value:function(){return g.a.createElement(T["a"],{navTitle:"\u7528\u6237\u7559\u5b58",openUserIdentityType:!0},g.a.createElement(N["a"],{title:"\u7528\u6237\u7559\u5b58\u5217\u8868"},g.a.createElement(F["a"],{analysisModel:H,name:"".concat(H,"_list_filter"),dateFilterSelections:["far7","far14","far30"],dataModels:[{name:"".concat(H,"_list"),DataModel:P,component:g.a.createElement(V,null)}],extraParams:z})))}}]),e}(x["PureComponent"]))||s);e["default"]=J},o0iW:function(t,e,a){t.exports={RetentionTable:"RetentionTable___2VBSk",tdItem:"tdItem___CeVaq",empty:"empty___197yz",item:"item___1Sl4i",itemText:"itemText___14am2",itemPercent:"itemPercent___2RTXa"}},t0Ix:function(t,e,a){t.exports={block:"block___39lHv",title:"title___1s0Sx",exportBtn:"exportBtn___W3rCA"}}}]);