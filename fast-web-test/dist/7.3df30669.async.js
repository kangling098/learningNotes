(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{HyuU:function(e,t,a){"use strict";var n=a("TqRt"),l=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i,d=n(a("lwsE")),u=n(a("W8MJ")),o=n(a("a1gu")),s=n(a("Nsbk")),f=n(a("7W2i")),c=l(a("q1tI")),m=n(a("O8Rh")),y=a("bk4t"),p=n(a("Kr6O")),_=n(a("1UQL")),v=n(a("RG2e")),h=n(a("EGzU")),S="user_retention",g=(r=(0,m.default)(),r(i=function(e){function t(){return(0,d.default)(this,t),(0,o.default)(this,(0,s.default)(t).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){return c.default.createElement(p.default,{navTitle:"\u7528\u6237\u7559\u5b58",openUserIdentityType:!0},c.default.createElement(_.default,{title:"\u7528\u6237\u7559\u5b58\u5217\u8868"},c.default.createElement(h.default,{analysisModel:S,name:"".concat(S,"_list_filter"),dateFilterSelections:["far7","far14","far30"],dataModels:[{name:"".concat(S,"_list"),DataModel:y.UserRetentionList,component:c.default.createElement(v.default,null)}],extraParams:y.RetentionSelection})))}}]),t}(c.PureComponent))||i),k=g;t.default=k},RG2e:function(e,t,a){"use strict";var n=a("TqRt"),l=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("g9YV");var r,i,d,u,o=n(a("wCAj")),s=n(a("RIqP")),f=n(a("lwsE")),c=n(a("W8MJ")),m=n(a("a1gu")),y=n(a("Nsbk")),p=n(a("7W2i")),_=l(a("q1tI")),v=n(a("0BT5")),h=a("zLPB"),S=n(a("Y+p1")),g=n(a("mwIZ")),k=n(a("wd/R")),E=n(a("o0iW")),w=(r=(0,v.default)(),r((u=d=function(e){function t(){var e,a;(0,f.default)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return a=(0,m.default)(this,(e=(0,y.default)(t)).call.apply(e,[this].concat(l))),a.state={pageSize:10,current:1,analysisData:{data:[]}},a}return(0,p.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e=this,t=this.state.analysisData,a=t.data,n=t.filter,l=void 0===n?["day$lt(15)"]:n,r=l[0].match(/day\$lt\((\d*)\)/)[1]-1,i=Array(r).fill(0).map(function(e,t){return{title:function(){return _.default.createElement("div",{style:{minWidth:"166px"}},"\u7b2c".concat(t+1,"\u5929"))},dataIndex:t+1,key:"time-".concat(t),align:"center",render:function(e,t){return e||0===e?_.default.createElement("div",{className:E.default.item},_.default.createElement("div",{className:E.default.itemText},(0,h.kSeparator)(e)),_.default.createElement("div",{className:E.default.itemPercent},(0,h.percentFormatter)(e/t.total))):_.default.createElement("div",{className:E.default.empty},"\xa0")}}}),d=[{title:"\u65e5\u671f",dataIndex:"date",key:"date",fixed:"left",align:"center",width:80,render:function(e){return _.default.createElement("div",{className:E.default.tdItem},(0,k.default)(e).format("MM/DD"))}},{title:"\u603b\u7528\u6237",dataIndex:"total",key:"total",width:80,align:"center",fixed:"left",render:function(e){return _.default.createElement("div",{className:E.default.tdItem},(0,h.kSeparator)(e))}}].concat((0,s.default)(i)),u={};a.forEach(function(e){u[e.date]=Array.isArray(u[e.date])?[].concat((0,s.default)(u[e.date]),[e]):[e]});var f=Object.keys(u).map(function(e){var t={};return t.date=e,t.total=(0,g.default)(u[e],"[0].total",0),u[e].forEach(function(e){t[e.day]=e.retention||0}),t});return _.default.createElement(o.default,{className:E.default.RetentionTable,dataSource:f.slice((this.state.current-1)*this.state.pageSize,this.state.current*this.state.pageSize),columns:d,scroll:{x:1200},pagination:{current:this.state.current,total:Object.keys(u).length,pageSize:this.state.pageSize,pageSizeOptions:["10","20","30","50"],showSizeChanger:!0,onShowSizeChange:function(t,a){e.setState({current:1,pageSize:a})},onChange:function(t){e.setState({current:t})}},rowKey:function(e){return e.date}})}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=(0,g.default)(e,"analysisData.data"),n=(0,g.default)(t,"analysisData.data"),l=(0,g.default)(e,"analysisData.filter"),r=(0,g.default)(e,"analysisData.filter"),i=!(0,S.default)(n,a),d=!(0,S.default)(l,r);return i||d?{current:1,analysisData:{data:a,filter:l}}:null}}]),t}(_.PureComponent),d.defaultProps={analysisData:{data:[]}},i=u))||i),R=w;t.default=R},bk4t:function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.UserRetentionList=t.RetentionSelection=void 0;var l=n(a("lwsE")),r=a("Zf/7"),i={user_id:{total:"total",retention:"retention"},real_user_id:{total:"real_total",retention:"real_retention"}},d="date",u="total",o="retention",s="day",f=[{key:"filter",text:"7\u65e5\u7559\u5b58",data:["day$lt(8)"]},{key:"filter",text:"14\u65e5\u7559\u5b58",data:["day$lt(15)"]},{key:"filter",text:"30\u65e5\u7559\u5b58",data:["day$lt(31)"]}];t.RetentionSelection=f;var c=function e(t){var a=t.userIdentityType,n=void 0===a?"user_id":a;return(0,l.default)(this,e),{model_type:r.MODE_TYPES.adm,dim_fields:[],date_unit:"day",num_fields:[{alias:u,name:i[n].total,fomula:""},{alias:o,name:i[n].retention},{alias:s,name:"day"},{alias:d,name:"dt"}],filter:["day$lt(8)"]}};t.UserRetentionList=c},o0iW:function(e,t,a){e.exports={RetentionTable:"RetentionTable___2VBSk",tdItem:"tdItem___CeVaq",empty:"empty___197yz",item:"item___1Sl4i",itemText:"itemText___14am2",itemPercent:"itemPercent___2RTXa"}}}]);