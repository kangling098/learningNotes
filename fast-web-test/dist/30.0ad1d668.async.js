(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[30],{"1UQL":function(e,t,n){"use strict";n("+L6B");var a=n("2/Rp"),i=n("2Taf"),r=n.n(i),o=n("vZ4D"),c=n.n(o),s=n("l4Ni"),l=n.n(s),u=n("ujKo"),d=n.n(u),p=n("MhPg"),h=n.n(p),v=n("q1tI"),f=n.n(v),m=(n("17x9"),n("t0Ix")),g=n.n(m),y=function(e){function t(){return r()(this,t),l()(this,d()(t).apply(this,arguments))}return h()(t,e),c()(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.title,i=e.exportable,r=e.style;return f.a.createElement("div",{className:g.a.block,style:r},n&&f.a.createElement("div",{className:g.a.title},f.a.createElement("span",null,n),i&&f.a.createElement(a["a"],{className:g.a.exportBtn,type:"normal",shape:"circle",icon:"download",size:"small"})),t)}}]),t}(v["PureComponent"]);y.defaultProps={style:{},exportable:!1},t["a"]=y},"7llA":function(e,t,n){e.exports={overviewCard:"overviewCard___1w1zB"}},"8xof":function(e,t,n){"use strict";n("Pwec");var a,i,r,o,c,s=n("CtXQ"),l=n("d6i3"),u=n.n(l),d=n("1l/V"),p=n.n(d),h=n("p0pE"),v=n.n(h),f=n("2Taf"),m=n.n(f),g=n("vZ4D"),y=n.n(g),_=n("l4Ni"),x=n.n(_),b=n("ujKo"),j=n.n(b),k=n("MhPg"),w=n.n(k),C=n("q1tI"),E=n.n(C),T=(n("17x9"),n("MT78")),R=n.n(T),N=n("PPmU"),P=n("0BT5"),D=n("Y+p1"),A=n.n(D),M=n("a9jo"),B=n.n(M),L=n("mwIZ"),I=n.n(L),O=n("w8y4"),S=n("zLPB"),G=n("9F+s"),z=n("v4z3"),U=n.n(z),Z=(a=Object(N["a"])({handleWidth:!0,handleHeight:!0,skipOnMount:!0,refreshMode:"throttle",refreshRate:300}),i=Object(P["a"])(),a(r=i((c=o=function(e){function t(e){var a;m()(this,t),a=x()(this,j()(t).call(this,e)),a.renderRankList=function(){var e=a.props,n=e.showRank,i=e.analysisData,r=e.name;if(!n)return null;var o=i.data,c=void 0===o?[]:o,s=i.dim_fields,l=void 0===s?[]:s,u=i.num_fields,d=void 0===u?[]:u,p=d.filter(function(e){return!e.hidden}),h=l[0],v=p[0],f=c.slice(0,n);return f.length>0?E.a.createElement("div",{className:U.a.rankList},E.a.createElement("div",{className:U.a.rankTitle},"TOP\u6392\u884c\u699c"),E.a.createElement("ul",{className:U.a.rankContent},f.map(function(e,n){var a=t.generateGeoName(e,h),i=e[v.alias]||0;return E.a.createElement("li",{key:"".concat(r,"-rank-list-row-").concat(n),className:U.a.rankRow},E.a.createElement("div",{className:U.a.rankRowLeft},E.a.createElement("span",{className:U.a.rankNum},n+1),a),E.a.createElement("div",{className:U.a.rankRowRight},Object(S["f"])(i)))}))):null},a.handleGeoThrough=function(e){e.event.event.stopPropagation();var t=I()(e,"data.name");if(t){var n=a.props,i=n.analysisData,r=n.getData,o=i||{},c=o.dim_fields,s=void 0===c?[]:c,l=o.through_index,u=void 0===l?0:l,d=o.max_through_index,p=void 0===d?0:d,h=o.filter,v=void 0===h?[]:h;if(!(u>=p)){var f=s[0].name;if(v.push("".concat(f,"$eq(").concat(t,")")),"province"===f){if(!G["b"][t])return;a.province=t}r({through_index:u+1,filter:v})}}},a.handleGeoThroughBack=function(e){"function"===typeof I()(e,"event.event.stopPropagation")&&e.event.event.stopPropagation();var t=a.props,n=t.analysisData,i=t.getData,r=n||{},o=r.through_index,c=void 0===o?0:o,s=r.filter,l=void 0===s?[]:s;if(!(c<=0)){var u=c-1;/^province\$eq\(/.test(l[u])&&(a.province="");var d=[].concat(l);d.pop(),i({through_index:u,filter:d})}},a.generateMapChart=function(e){var n=e.tooltip,i=void 0===n?{}:n,r=e.grid,o=void 0===r?{}:r,c=e.data,s=void 0===c?[]:c,l=e.dim_fields,u=void 0===l?[]:l,d=e.num_fields,p=void 0===d?[]:d,h=e.formatters,f=void 0===h?{}:h;a.loadMap();var m,g=p.filter(function(e){return!e.hidden}),y=u[0],_=g[0],x=0,b=B()(s,function(e){return e[_.alias]||0}),j=[{name:_.alias,type:"map",geoIndex:0,data:s.map(function(e){var n=e[_.alias]||0,a=Object(S["j"])(100*n/b);return x=x<n?n:x,m=void 0===m?n:m>n?n:m,{name:t.generateGeoName(e,y),rate:"".concat(Number.isNaN(a)?0:a,"%"),value:n}})}],k=Object(O["c"])(function(e){return e},function(e){return"function"===typeof f[e.seriesName]?f[e.seriesName](e.value):Object(S["f"])(e.value)});return{tooltip:v()({trigger:"item",backgroundColor:"transparent",padding:0,formatter:k},i),grid:v()({},G["e"],o),visualMap:{type:"continuous",min:m,max:x,right:"center",top:"center",padding:[0,0,0,700],hoverLink:!0,align:"left",inRange:{color:[G["d"].min,G["d"].max]},outOfRange:{color:G["d"].empty},text:["\u9ad8","\u4f4e"],calculable:!0,orient:"vertical",itemWidth:20,itemHeight:200,textStyle:{color:"RGBA(0,0,0,0.45)"}},geo:{map:y&&"province"===y.name?"china":a.province||"china",zoom:1.2,top:"middle",left:"center",itemStyle:{borderColor:G["d"].edge,borderWidth:.5,color:G["d"].empty},emphasis:{label:{show:!1},itemStyle:{color:G["d"].hover}}},series:j}},a.bindThroughActions=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(a.chart){try{a.echartRef.firstChild.firstChild.oncontextmenu=function(e){return e.preventDefault(),!1}}catch(e){}a.chart.off("click"),a.chart.off("contextmenu"),e&&(a.chart.on("click",a.handleGeoThrough),a.chart.on("contextmenu",a.handleGeoThroughBack))}},a.loadMap=p()(u.a.mark(function e(){var t;return u.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=a.province?"province/".concat(G["b"][a.province]):"china",a.mapLoaded[t]){e.next=7;break}return a.mapLoading=!0,e.next=5,n("XkqJ")("./".concat(t));case 5:a.mapLoading=!1,a.chart&&a.chart.setOption(a.option);case 7:case"end":return e.stop()}},e)}));var i=e.analysisData;return a.chart=null,a.mapLoaded={},a.mapLoading=!1,a.currThroughIndex=0,a.province="",a.prevProvince="",a.option=a.generateMapChart(i),a}return w()(t,e),y()(t,[{key:"componentDidMount",value:function(){this.chart=R.a.init(this.echartRef),this.chart.setOption(this.option,!0);var e=this.props.analysisData||{},t=e.max_through_index,n=void 0===t?0:t;this.bindThroughActions(n>0)}},{key:"shouldComponentUpdate",value:function(e){var t=e.width,n=e.height,a=e.analysisData,i=e.showRank,r=a||{},o=r.through_index,c=void 0===o?0:o,s=r.max_through_index,l=void 0===s?0:s,u=r.data,d=void 0===u?[]:u,p=i>0&&!A()(I()(this.props.analysisData,"data",[]),d);this.currThroughIndex=c,this.bindThroughActions(l>0);var h=this.generateMapChart(a);return!A()(this.option,h)&&this.chart&&(this.option=h,this.mapLoading||this.chart.setOption(h,!0)),this.props.width===t&&this.props.height===n||this.chart&&this.chart.resize({width:t,height:n}),this.province!==this.prevProvince?(this.prevProvince=this.province,!0):p}},{key:"componentWillUnmount",value:function(){this.bindThroughActions(!1),this.chart.dispose(),this.chart=null}},{key:"render",value:function(){var e=this,t=this.props,n=t.chartWidth,a=t.chartHeight;return E.a.createElement("div",{className:U.a.mapChart,style:{width:n,height:a}},this.renderRankList(),this.province&&E.a.createElement("div",{className:U.a.backArrow,onClick:this.handleGeoThroughBack},E.a.createElement(s["a"],{type:"arrow-left"})),E.a.createElement("div",{className:U.a.baseChart,ref:function(t){e.echartRef=t},onContextMenu:function(e){return e.stopPropagation(),e.preventDefault(),!1}}))}}],[{key:"generateGeoName",value:function(e,t){var n=e[t.alias];return n?"city"!==t.name||/(\u53bf|\u5e02|\u5730\u533a|\u81ea\u6cbb\u5dde)$/.test(n)?n:"".concat(n,"\u5e02"):"-"}}]),t}(C["Component"]),o.defaultProps={chartWidth:"100%",chartHeight:"400px",showRank:0},r=c))||r)||r);t["a"]=Z},"9F+s":function(e,t,n){"use strict";n.d(t,"c",function(){return a}),n.d(t,"d",function(){return i}),n.d(t,"g",function(){return r}),n.d(t,"h",function(){return o}),n.d(t,"a",function(){return c}),n.d(t,"f",function(){return s}),n.d(t,"e",function(){return l}),n.d(t,"b",function(){return u});var a=["RGBA(24,144,255,0.85)","RGBA(7,194,91,0.85)","RGBA(250,204,20,0.85)","RGBA(240,72,100,0.85)","RGBA(19,194,194,0.85)","RGBA(133,67,224,0.85)","RGBA(52,54,199,0.85)","RGBA(34,50,115,0.85)","RGBA(30,203,234,0.85)","RGBA(135,202,26,0.85)","RGBA(247,160,32,0.85)","RGBA(235,61,171,0.85)","RGBA(15,209,159,0.85)","RGBA(96,77,227,0.85)","RGBA(0,118,173,0.85)","RGBA(255,64,64,0.85)"],i={empty:"RGBA(233,249,255,0.85)",min:"RGBA(186,231,255,0.85)",max:"RGBA(0,80,179,0.85)",edge:"RGBA(212,239,244,0.85)",hover:"RGBA(48,194,91,0.85)"},r={type:"category",axisTick:{alignWithLabel:!0,interval:0},axisLine:{lineStyle:{color:"RGBA(217,217,217,0.85)"}},axisLabel:{color:"RGBA(0,0,0,0.85)",interval:0}},o={type:"value",axisLine:{show:!1},axisTick:{show:!1},splitLine:{lineStyle:{type:"dashed",color:"#E8E8E8"}},min:0},c={confine:!0,trigger:"axis",axisPointer:{type:"shadow",z:0,shadowStyle:{color:"#EEF4FC",opacity:.6}},backgroundColor:"transparent",padding:0},s={trigger:"item",backgroundColor:"transparent",padding:0},l={top:"32px",right:"24px",bottom:"24px",left:"24px",containLabel:!0},u={"\u5b89\u5fbd":"anhui","\u6fb3\u95e8":"aomen","\u5317\u4eac":"beijing","\u91cd\u5e86":"chongqing","\u798f\u5efa":"fujian","\u7518\u8083":"gansu","\u5e7f\u4e1c":"guangdong","\u5e7f\u897f":"guangxi","\u8d35\u5dde":"guizhou","\u6d77\u5357":"hainan","\u6cb3\u5317":"hebei","\u9ed1\u9f99\u6c5f":"heilongjiang","\u6cb3\u5357":"henan","\u6e56\u5317":"hubei","\u6e56\u5357":"hunan","\u6c5f\u82cf":"jiangsu","\u6c5f\u897f":"jiangxi","\u5409\u6797":"jilin","\u8fbd\u5b81":"liaoning","\u5185\u8499\u53e4":"neimenggu","\u5b81\u590f":"ningxia","\u9752\u6d77":"qinghai","\u5c71\u4e1c":"shandong","\u4e0a\u6d77":"shanghai","\u5c71\u897f":"shanxi","\u9655\u897f":"shanxi1","\u56db\u5ddd":"sichuan","\u53f0\u6e7e":"taiwan","\u5929\u6d25":"tianjin","\u9999\u6e2f":"xianggang","\u65b0\u7586":"xinjiang","\u897f\u85cf":"xizang","\u4e91\u5357":"yunnan","\u6d59\u6c5f":"zhejian"}},PPmU:function(e,t,n){"use strict";var a=n("2Taf"),i=n.n(a),r=n("vZ4D"),o=n.n(r),c=n("l4Ni"),s=n.n(c),l=n("ujKo"),u=n.n(l),d=n("MhPg"),p=n.n(d),h=n("q1tI"),v=n.n(h),f=n("yUt2"),m=function(e){return function(t){var n=function(n){function a(){return i()(this,a),s()(this,u()(a).apply(this,arguments))}return p()(a,n),o()(a,[{key:"render",value:function(){return v.a.createElement(f["a"],e,v.a.createElement(t,this.props))}}]),a}(h["PureComponent"]);return n}};t["a"]=m},"QvT+":function(e,t,n){"use strict";n("Pwec");var a=n("CtXQ"),i=n("2Taf"),r=n.n(i),o=n("vZ4D"),c=n.n(o),s=n("l4Ni"),l=n.n(s),u=n("ujKo"),d=n.n(u),p=n("MhPg"),h=n.n(p),v=n("q1tI"),f=n.n(v),m=(n("17x9"),n("zLPB")),g=n("kxAN"),y=n.n(g),_=function(e){function t(){return r()(this,t),l()(this,d()(t).apply(this,arguments))}return h()(t,e),c()(t,[{key:"render",value:function(){var e=this.props,t=e.style,n=e.title,i=e.value,r=e.suffix,o=e.trend,c=e.empty;return f.a.createElement("div",{className:y.a.indicatorCard,style:t},f.a.createElement("div",{className:y.a.title},n),f.a.createElement("div",{className:y.a.value},i?Object(m["f"])(i)+r:c,o&&f.a.createElement(a["a"],{type:"caret-".concat(o),className:y.a.trend})))}}]),t}(v["PureComponent"]);_.defaultProps={empty:0,suffix:""},t["a"]=_},XkqJ:function(e,t,n){var a={"./china":["MTm3",0],"./china-contour":["ckbx",0],"./china-contour.js":["ckbx",0],"./china.js":["MTm3",0],"./province/anhui":["4pv+",0],"./province/anhui.js":["4pv+",0],"./province/aomen":["4Q4p",0],"./province/aomen.js":["4Q4p",0],"./province/beijing":["6L/5",0],"./province/beijing.js":["6L/5",0],"./province/chongqing":["uOSN",0],"./province/chongqing.js":["uOSN",0],"./province/fujian":["SqIS",0],"./province/fujian.js":["SqIS",0],"./province/gansu":["ugjr",0],"./province/gansu.js":["ugjr",0],"./province/guangdong":["LeL8",0],"./province/guangdong.js":["LeL8",0],"./province/guangxi":["QhB3",0],"./province/guangxi.js":["QhB3",0],"./province/guizhou":["zfDf",0],"./province/guizhou.js":["zfDf",0],"./province/hainan":["nP5N",0],"./province/hainan.js":["nP5N",0],"./province/hebei":["vvdu",0],"./province/hebei.js":["vvdu",0],"./province/heilongjiang":["gtn2",0],"./province/heilongjiang.js":["gtn2",0],"./province/henan":["eUBr",0],"./province/henan.js":["eUBr",0],"./province/hubei":["HIuW",0],"./province/hubei.js":["HIuW",0],"./province/hunan":["cL/E",0],"./province/hunan.js":["cL/E",0],"./province/jiangsu":["fGLE",0],"./province/jiangsu.js":["fGLE",0],"./province/jiangxi":["wMn0",0],"./province/jiangxi.js":["wMn0",0],"./province/jilin":["hUXd",0],"./province/jilin.js":["hUXd",0],"./province/liaoning":["eor2",0],"./province/liaoning.js":["eor2",0],"./province/neimenggu":["ASvv",0],"./province/neimenggu.js":["ASvv",0],"./province/ningxia":["hpxM",0],"./province/ningxia.js":["hpxM",0],"./province/qinghai":["Skrp",0],"./province/qinghai.js":["Skrp",0],"./province/shandong":["o4nb",0],"./province/shandong.js":["o4nb",0],"./province/shanghai":["9NOo",0],"./province/shanghai.js":["9NOo",0],"./province/shanxi":["Hik2",0],"./province/shanxi.js":["Hik2",0],"./province/shanxi1":["xuaG",0],"./province/shanxi1.js":["xuaG",0],"./province/sichuan":["1xr8",0],"./province/sichuan.js":["1xr8",0],"./province/taiwan":["pwDG",0],"./province/taiwan.js":["pwDG",0],"./province/tianjin":["+uhR",0],"./province/tianjin.js":["+uhR",0],"./province/xianggang":["S3b0",0],"./province/xianggang.js":["S3b0",0],"./province/xinjiang":["dxN8",0],"./province/xinjiang.js":["dxN8",0],"./province/xizang":["3OhQ",0],"./province/xizang.js":["3OhQ",0],"./province/yunnan":["aE3T",0],"./province/yunnan.js":["aE3T",0],"./province/zhejiang":["QEUK",0],"./province/zhejiang.js":["QEUK",0],"./world":["xU2t",0],"./world.js":["xU2t",0]};function i(e){var t=a[e];return t?n.e(t[1]).then(function(){var e=t[0];return n.t(e,7)}):Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}i.keys=function(){return Object.keys(a)},i.id="XkqJ",e.exports=i},ZfYN:function(e,t,n){"use strict";var a=n("2Taf"),i=n.n(a),r=n("vZ4D"),o=n.n(r),c=n("l4Ni"),s=n.n(c),l=n("ujKo"),u=n.n(l),d=n("MhPg"),p=n.n(d),h=n("q1tI"),v=n.n(h),f=(n("17x9"),n("MT78")),m=n.n(f),g=n("p0pE"),y=n.n(g),_=n("Y/ft"),x=n.n(_),b=n("jehZ"),j=n.n(b),k=n("Y+p1"),w=n.n(k),C=n("w8y4"),E=n("zLPB"),T=n("9F+s");function R(){return function(e){var t=function(t){function n(){var e,t;i()(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return t=s()(this,(e=u()(n)).call.apply(e,[this].concat(r))),t.state={option:{}},t}return p()(n,t),o()(n,[{key:"render",value:function(){return v.a.createElement(e,j()({option:this.state.option},this.props))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=e.analysisData,i=e.chartType,r=e.dataLimit,o=n.getOptionByType(a,i,r);return w()(o,t.option)?null:{option:o}}},{key:"getOptionByType",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"barlike",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=e||{},r=i.chart_type,o=i.data_limit,c=r||t,s=o||a,l={barlike:n.generateBarlikeChart,pielike:n.generatePielikeChart},u=l[c.split("_")[0]](e,c,s);return u}},{key:"generateBarlikeChart",value:function(e,t,n){var a=e.tooltip,i=void 0===a?{}:a,r=e.grid,o=void 0===r?{}:r,c=e.formatters,s=void 0===c?{}:c,l=Object(C["c"])(function(e){return e},function(e){return"function"===typeof s[e.seriesName]?s[e.seriesName](e.value):Object(E["f"])(e.value)}),u=Object(C["a"])(e,"barlike_horizon"===t,n);if(!u)return{};var d=u.legendData,p=x()(u,["legendData"]),h=y()({tooltip:y()({},T["a"],i,{formatter:l}),color:T["c"],grid:y()({},T["e"],o),legend:{show:d.length>1,data:d,bottom:10,itemWidth:10,itemHeight:10}},p);return h.legend.show&&(h.grid.bottom="44px"),h}},{key:"generatePielikeChart",value:function(e,t,n){var a=e.tooltip,i=void 0===a?{}:a,r=e.grid,o=void 0===r?{}:r,c=e.formatters,s=void 0===c?{}:c,l=Object(C["c"])(function(e){return e},function(e){return"function"===typeof s[e.seriesName]?s[e.seriesName](e.value):Object(E["f"])(e.value)}),u=Object(C["b"])(e,n);if(!u)return{};var d=y()({tooltip:y()({},T["f"],i,{formatter:l}),color:T["c"],grid:y()({},T["e"],o)},u);return d}}]),n}(h["PureComponent"]);return t}}var N,P,D,A,M,B,L=R,I=n("PPmU"),O=n("0BT5"),S=n("v4z3"),G=n.n(S),z=(N=L(),P=Object(I["a"])({handleWidth:!0,skipOnMount:!0,refreshMode:"throttle",refreshRate:300}),D=Object(O["a"])(),N(A=P(A=D((B=M=function(e){function t(){var e,n;i()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=s()(this,(e=u()(t)).call.apply(e,[this].concat(r))),n.chart=null,n}return p()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.chart=m.a.init(this.echartRef),this.chart.setOption(this.props.option,!0)}},{key:"shouldComponentUpdate",value:function(e){var t=e.width,n=e.option,a=e.chartHeight;return!w()(this.props.option,n)&&this.chart&&this.chart.setOption(n,!0),this.props.width!==t&&this.chart&&this.chart.resize({width:t,height:a}),!1}},{key:"componentWillUnmount",value:function(){this.chart.dispose(),this.chart=null}},{key:"render",value:function(){var e=this,t=this.props,n=t.chartWidth,a=t.chartHeight;return v.a.createElement("div",{style:{width:n,height:a}},v.a.createElement("div",{className:G.a.baseChart,ref:function(t){e.echartRef=t}}))}}]),t}(h["Component"]),M.defaultProps={chartWidth:"100%",chartHeight:"400px",dataLimit:0,chartType:"barlike",option:{}},A=B))||A)||A)||A);t["a"]=z},a9jo:function(e,t,n){var a=n("ut/Y"),i=n("7Paf");function r(e,t){return e&&e.length?i(e,a(t,2)):0}e.exports=r},frMp:function(e,t,n){"use strict";n("T2oS");var a=n("W9HT"),i=n("jehZ"),r=n.n(i),o=n("p0pE"),c=n.n(o),s=n("Y/ft"),l=n.n(s),u=n("2Taf"),d=n.n(u),p=n("vZ4D"),h=n.n(p),v=n("l4Ni"),f=n.n(v),m=n("ujKo"),g=n.n(m),y=n("MhPg"),_=n.n(y),x=n("q1tI"),b=n.n(x),j=n("MuoO"),k=n("mwIZ"),w=n.n(k),C=n("zLPB");function E(e){var t=e.analysisModel,n=e.name,i=e.DataModel,o=e.paginationable,s=void 0!==o&&o,u=e.contentStyle,p=void 0===u?{}:u,v=e.noDataStatus,m=void 0===v||v,y=e.useThreshold,k=void 0!==y&&y,E=e.contentHeight,T=void 0===E?"200px":E;return function(e){var o,u,v,y=(o=Object(j["connect"])(function(e){var t=e.analysis,n=e.common;return{productCode:n.productCode,appCode:n.appCode,tenantCode:n.tenantCode,data:t.data,threshold:t.threshold,userIdentityType:t.userIdentityType,pageIdentityType:t.pageIdentityType}}),o((v=function(o){function u(){var e,a;d()(this,u);for(var r=arguments.length,o=new Array(r),p=0;p<r;p++)o[p]=arguments[p];return a=f()(this,(e=g()(u)).call.apply(e,[this].concat(o))),a.state={loading:!1,thresholdValue:0},a._getData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.page,o=void 0===r?1:r,u=l()(e,["page"]),d=a.props,p=d.dispatch,h=d.productCode,v=d.appCode,f=d.tenantCode,m=d.userIdentityType,g=d.pageIdentityType,y=a.state.thresholdValue;if(h&&i&&n){var _=new i(c()({userIdentityType:m,pageIdentityType:g,threshold:y},u)),x=c()({analysisModel:t,productCode:h,appCode:v,tenantCode:f,name:n},_);s&&o>0&&(x.page=o),a.setState({loading:!0}),p({type:"analysis/fetchAnalysisData",payload:x}).then(function(){a.setState({loading:!1})})}},a}return _()(u,o),h()(u,[{key:"componentDidMount",value:function(){this._getData()}},{key:"getSnapshotBeforeUpdate",value:function(e,t){var n=this.props,a=n.productCode,i=n.appCode,r=n.tenantCode,o=n.userIdentityType,c=n.pageIdentityType,s=this.state.thresholdValue;return a!==e.productCode||i!==e.appCode||r!==e.tenantCode||(!(!k||"number"!==typeof s||s===t.thresholdValue)||(o!==e.userIdentityType||c!==e.pageIdentityType))}},{key:"componentDidUpdate",value:function(e,t,n){n&&this._getData()}},{key:"componentWillUnmount",value:function(){this.setState=function(){}}},{key:"render",value:function(){var i=this.props,o=i.data,u=i.productCode,d=i.appCode,h=i.tenantCode,v=l()(i,["data","productCode","appCode","tenantCode"]),f=this.state.loading;Reflect.deleteProperty(v,"threshold"),Reflect.deleteProperty(v,"userIdentityType"),Reflect.deleteProperty(v,"pageIdentityType");var g=Object(C["e"])({productCode:u,appCode:d,tenantCode:h,name:n}),y=w()(o,g,null),_=w()(y,"data",[]),x=w()(y,"msg","\u6682\u65e0\u6570\u636e"),j=!Array.isArray(_)||0===_.length,k=b.a.createElement("div",{style:{textAlign:"center",height:T,lineHeight:T}},f?null:x||"\u6682\u65e0\u6570\u636e");return b.a.createElement(a["a"],{spinning:f},b.a.createElement("div",{style:c()({height:T},p)},j&&m?k:b.a.createElement(e,r()({analysisData:y,analysisModel:t,name:n,paginationable:s,getData:this._getData},v))))}}],[{key:"getDerivedStateFromProps",value:function(e,n){if(k){var a=w()(e.threshold,t,null);if(a!==n.thresholdValue)return{thresholdValue:a}}return null}}]),u}(x["PureComponent"]),u=v))||u);return y}}t["a"]=E},j4Gd:function(e,t,n){"use strict";n.r(t);var a,i,r,o,c=n("2Taf"),s=n.n(c),l=n("vZ4D"),u=n.n(l),d=n("l4Ni"),p=n.n(d),h=n("ujKo"),v=n.n(h),f=n("MhPg"),m=n.n(f),g=n("q1tI"),y=n.n(g),_=n("frMp"),x=n("O8Rh"),b=n("wd/R"),j=n.n(b),k=n("Zf/7"),w={hour:"hour",day:"dt"},C={user_id:"new_user_num",real_user_id:"new_real_user_num"},E="\u65b0\u589e\u7528\u6237",T="\u4eca\u65e5\u65b0\u589e\u7528\u6237",R="\u6708\u65b0\u589e\u7528\u6237(\u8fd130\u5929)",N="\u65f6\u95f4",P="\u79df\u6237",D=function e(t){var n=t.userIdentityType,a=void 0===n?"user_id":n;return s()(this,e),{from_date:j()().format(k["d"]),to_date:j()().format(k["d"]),date_unit:"day",num_fields:[{alias:T,fomula:"sum",name:C[a]}]}},A=function e(t){var n=t.userIdentityType,a=void 0===n?"user_id":n;return s()(this,e),{from_date:j()().subtract(30,"d").format(k["d"]),to_date:j()().format(k["d"]),date_unit:"day",num_fields:[{alias:R,fomula:"sum",name:C[a]}]}},M=function e(t){var n=t.date_unit,a=t.userIdentityType,i=void 0===a?"user_id":a;return s()(this,e),{dim_fields:[{alias:N,name:w[n],data_fill:!0}],order_by:["".concat(N,"$asc")],num_fields:[{alias:E,fomula:"sum",name:C[i],type:"line"}],value_axis:[{}],category_axis:{axisLabel:{interval:"auto",showMaxLabel:!0,showMinLabel:!0}},tooltip:{axisPointer:{type:"line",lineStyle:{color:"#8C9BA5",opacity:.6}}}}},B=function e(t){var n=t.userIdentityType,a=void 0===n?"user_id":n,i=t.through_index,r=void 0===i?0:i,o=t.from_date,c=t.to_date,l=t.filter,u=void 0===l?[]:l;s()(this,e);var d=[{alias:"\u7701",name:"province"},{alias:"\u5e02",name:"city"}];return{chart_type:"map",max_through_index:1,from_date:o,to_date:c,date_unit:"day",dim_fields:[d[r]],num_fields:[{alias:E,name:C[a],fomula:"sum"}],order_by:["".concat(E,"$desc")],through_index:r,filter:u}},L=function e(t){var n=t.userIdentityType,a=void 0===n?"user_id":n;return s()(this,e),{filter:["tenant$isnet()"],dim_fields:[{alias:P,name:"tenant"}],num_fields:[{alias:E,name:C[a],fomula:"sum",type:"bar"}],order_by:["".concat(E,"$desc")],value_axis:[{name:"\u7528\u6237\u6570"}],chart_type:"barlike_horizon",grid:{left:"10%",right:"10%"},data_limit:6}},I=n("Kr6O"),O=n("1UQL"),S=n("ZfYN"),G=n("rjEP"),z=n("8xof"),U=n("EGzU"),Z="new_user",q=Object(_["a"])({analysisModel:Z,noDataStatus:!1,name:"".concat(Z,"_day_added"),DataModel:D,contentHeight:"64px"})(G["a"]),W=Object(_["a"])({analysisModel:Z,noDataStatus:!1,name:"".concat(Z,"_month_added"),DataModel:A,contentHeight:"64px"})(G["a"]),H=(a=Object(x["a"])(),a((o=r=function(e){function t(){return s()(this,t),p()(this,v()(t).apply(this,arguments))}return m()(t,e),u()(t,[{key:"render",value:function(){var e=this.props,n=e.isSaasApp,a=e.tenantCode;return y.a.createElement(I["a"],{navTitle:"\u65b0\u589e\u7528\u6237",openUserIdentityType:!0},y.a.createElement("div",null,y.a.createElement(O["a"],{style:t.STYLES.cardBlock},y.a.createElement(q,{noChart:!0})),y.a.createElement(O["a"],{style:t.STYLES.cardBlockLast},y.a.createElement(W,{noChart:!0})),y.a.createElement("div",{style:{clear:"both"}})),y.a.createElement(O["a"],{title:"\u65b0\u589e\u7528\u6237\u8d8b\u52bf"},y.a.createElement(U["a"],{analysisModel:Z,name:"".concat(Z,"_trend_filter"),dataModels:[{name:"".concat(Z,"_trend"),DataModel:M,paginationable:!1,component:y.a.createElement(S["a"],{chartHeight:"280px"})}]})),y.a.createElement(O["a"],{title:"\u6d4f\u89c8\u5730\u533a\u5206\u5e03"},y.a.createElement(U["a"],{analysisModel:Z,name:"".concat(Z,"_regional_filter"),dataModels:[{name:"".concat(Z,"_regional"),DataModel:B,paginationable:!1,component:y.a.createElement(z["a"],{showRank:5})}]})),n&&!a&&y.a.createElement(O["a"],{title:"\u79df\u6237\u65b0\u589e\u7528\u6237\u6982\u89c8"},y.a.createElement(U["a"],{analysisModel:Z,name:"".concat(Z,"_overview_filter"),dataModels:[{name:"".concat(Z,"_overview"),DataModel:L,paginationable:!1,component:y.a.createElement(S["a"],null)}]})))}}]),t}(g["PureComponent"]),r.STYLES={cardBlock:{padding:"20px 0",width:"calc(50% - 8px)",float:"left",marginRight:"16px"},cardBlockLast:{padding:"20px 0",width:"calc(50% - 8px)",float:"left"}},i=o))||i);t["default"]=H},kxAN:function(e,t,n){e.exports={indicatorCard:"indicatorCard___cZWaI",title:"title___jIDoI",value:"value___1Gup7",trend:"trend___2Owb4"}},rjEP:function(e,t,n){"use strict";var a,i,r,o,c=n("2Taf"),s=n.n(c),l=n("vZ4D"),u=n.n(l),d=n("l4Ni"),p=n.n(d),h=n("ujKo"),v=n.n(h),f=n("MhPg"),m=n.n(f),g=n("q1tI"),y=n.n(g),_=(n("17x9"),n("0BT5")),x=n("ZfYN"),b=n("QvT+"),j=n("0YDr"),k=n.n(j),w=n("q92V"),C=n.n(w),E=n("AE40"),T=n.n(E),R=n("PZX/"),N=n.n(R),P=n("mwIZ"),D=n.n(P),A=n("7llA"),M=n.n(A),B=(a=Object(_["a"])(),a((o=r=function(e){function t(){var e,n;s()(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return n=p()(this,(e=v()(t)).call.apply(e,[this].concat(i))),n.renderCard=function(){var e=n.props.analysisData,t=e||{},a=t.data,i=void 0===a?[]:a,r=t.num_fields,o=void 0===r?[]:r,c=o.filter(function(e){return!e.hidden}),s=c[0],l=0,u=i.map(function(e){return e[s.alias]}),d={max:C.a,min:T.a,avg:N.a};l=s&&"function"===typeof d[s.fomula]?d[s.fomula](u):k()(u),s&&"function"===typeof s.formatter&&(l=s.formatter(l));var p=D()(s,"unit","")||"",h=D()(s,"alias","")||"";return y.a.createElement(b["a"],{title:h,value:l,suffix:p})},n}return m()(t,e),u()(t,[{key:"render",value:function(){var e=this.props,t=e.analysisData,n=e.getData,a=e.style,i=e.noChart;return y.a.createElement("div",{className:M.a.overviewCard,style:a},this.renderCard(),!i&&t&&y.a.createElement(x["a"],{analysisData:t,getData:n,chartHeight:"62px"}))}}]),t}(g["PureComponent"]),r.defaultProps={style:{},noChart:!1},i=o))||i);t["a"]=B},t0Ix:function(e,t,n){e.exports={block:"block___39lHv",title:"title___1s0Sx",exportBtn:"exportBtn___W3rCA"}},v4z3:function(e,t,n){e.exports={baseChart:"baseChart___1s0-E",mapChart:"mapChart___t5BFa",backArrow:"backArrow___3pMwo",rankList:"rankList___CJZkI",rankTitle:"rankTitle___3Kzys",rankContent:"rankContent___1xoCG",rankRow:"rankRow___3WsrP",rankRowLeft:"rankRowLeft___ltySZ",rankNum:"rankNum___SBPQ2",rankRowRight:"rankRowRight___216Qa"}},w8y4:function(e,t,n){"use strict";n.d(t,"c",function(){return B}),n.d(t,"a",function(){return S}),n.d(t,"b",function(){return G});var a=n("WweU"),i=n.n(a),r=n("gWZ8"),o=n.n(r),c=n("p0pE"),s=n.n(c),l=n("eHn4"),u=n.n(l),d=n("wd/R"),p=n.n(d),h=n("mwIZ"),v=n.n(h),f=n("bt/X"),m=n.n(f),g=n("7GkX"),y=n.n(g),_=n("0YDr"),x=n.n(_),b=n("q92V"),j=n.n(b),k=n("AE40"),w=n.n(k),C=n("PZX/"),E=n.n(C),T=n("P4Tr"),R=n.n(T),N=n("BkRI"),P=n.n(N),D=n("zLPB"),A=n("Zf/7"),M=n("9F+s");function B(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e.value};return function(n){var a=Array.isArray(n)?n:[n],i="pie"===a[0].componentSubType,r="map"===a[0].componentSubType;if(r&&-1===a[0].dataIndex&&!a[0].data)return'<div class="base-chart-tooltip"><div class="title"><p>\u6682\u65e0\u6570\u636e</p></div></div>';var o="";if("function"===typeof e){var c=e(a[0].name),s=c.length>60?"".concat(c.slice(0,50),"..."):c;o='<div class="title"><p>'.concat(s,"</p></div>")}var l=a.map(function(e){return'\n      <div class="item" style="border-color: '.concat(e.color,'">\n        <p class="name">').concat(i?e.name:e.seriesName,'</p>\n        <p class="value">').concat(void 0===e.value?"-":t(e),"</p>\n      </div>\n    ")});return r&&a[0].data.rate&&l.push('\n        <div class="item" style="border-color: '.concat(M["c"][1],'">\n          <p class="name">\u5360\u6bd4</p>\n          <p class="value">').concat(a[0].data.rate,"</p>\n        </div>\n      ")),'<div class="base-chart-tooltip'.concat(i?" fast-chart-pip":"",'">\n      ').concat(o,'\n      <div class="items">\n        ').concat(l.join("\n"),"\n      </div>\n    </div>")}}function L(e,t,n,a){var i=[],r=e.map(function(e){return e[t]});if(n===a)for(var o=0,c=0;o<24;o++){var l=r[0],d=u()({},t,"".concat(o,":00"));o===l&&(d=s()({},e[c],u()({},t,"".concat(o,":00"))),r.shift(),c++),i.push(d)}else for(var h=p()(a).diff(p()(n),"d"),v=0,f=0;v<=h;v++){var m=p()(n).add(v,"d").format(A["d"]),g=p()(r[0]).format(A["d"]),y=u()({},t,m);m===g&&(y=s()({},e[f],u()({},t,m)),r.shift(),f++),i.push(y)}return i}function I(e){e/=.9;var t=[5,2],n=0,a=t[n];while(e>a)n=n?0:1,a*=t[n];return{max:a,interval:a/5}}function O(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t?12:8,a=n<=e?0:n-e;return n+Math.pow(a,2)}function S(e){var t,n=e.from_date,a=e.to_date,r=e.dim_fields,c=void 0===r?[]:r,l=e.num_fields,d=void 0===l?[]:l,p=e.value_axis,h=void 0===p?[]:p,f=e.category_axis,g=void 0===f?{}:f,_=e.data,b=void 0===_?[]:_,k=arguments.length>1&&void 0!==arguments[1]&&arguments[1],C=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6;if(b=P()(b),0===c.length)return null;var T=k?"yAxis":"xAxis",N=k?"xAxis":"yAxis",A="".concat(N,"Index"),B=(t={},u()(t,T,[R()({},g,M["g"])]),u()(t,"series",[]),u()(t,"legendData",[]),t),S=d.filter(function(e){return!e.hidden}),G={},z=function(e,t){k&&(e=e.slice(),e.reverse()),S.forEach(function(n,a){var i=t?"".concat(t," "):"",r=s()({name:"".concat(i).concat(n.alias),type:n.type||"bar",data:e.map(function(e){return e[n.alias]||0}),emphasis:{}},n.seriesConfig),c=Math.max.apply(Math,o()(r.data));r[A]=n.yAxisIndex||0,"line"===n.type&&(r.smooth=!0,r.smoothMonotone="x",r.emphasis.itemStyle=s()({color:M["c"][a],borderWidth:2,borderColor:"#fff"},v()(n,"seriesConfig.emphasis.itemStyle",null))),G[r[A]]?G[r[A]]=G[r[A]]<c?c:G[r[A]]:G[r[A]]=c,B.series.push(r),"line"===r.type&&B.legendData.push({name:r.name,icon:"circle"})})},U=function(e,t){k&&(e=e.slice(),e.reverse()),B[T][0].data=e.map(function(e){return e[t]||"-"});var n=O(e.length,k);B[T][0].axisLabel.formatter=D["h"].bind(null,n)},Z=i()(c),q=Z[0],W=Z.slice(1);if(q.data_fill&&0===W.length){var H=L(b,q.alias,n,a);z(H),U(H,q.alias)}else if(q.data_fill&&W.length>0){var Q=W.map(function(e){return e.alias}),Y=Q.join("&");b=b.map(function(e){return s()({},e,u()({},Y,Q.map(function(t){return e[t]}).join("&")))});var K=m()(b,Y);y()(K).forEach(function(e,t){var i=L(K[e],q.alias,n,a);z(i,e),0===t&&U(i,q.alias)})}else{var X=c.map(function(e){return e.alias}),F=X.join("&"),V=b.map(function(e){return s()({},e,u()({},F,X.map(function(t){return e[t]}).join("&")))});if(C>0&&V.length>C){var $=V.splice(C-1),J=u()({},F,"\u5176\u4ed6");S.forEach(function(e){var t=e.alias,n=$.map(function(e){return e[t]}),a={max:j.a,min:w.a,avg:E.a};"function"===typeof a[e.fomula]?J[t]=a[e.fomula](n):J[t]=x()(n),Number.isNaN(J[t])&&(J[t]=0)}),V.push(J)}z(V),U(V,F)}return B[N]=h.map(function(e,t){var n=R()({},e,M["h"]);return s()({},n,I(G[t]))}),B}function G(e){var t=e.from_date,n=e.to_date,a=e.dim_fields,i=void 0===a?[]:a,r=e.num_fields,o=void 0===r?[]:r,c=e.data,l=void 0===c?[]:c,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,d=o.filter(function(e){return!e.hidden}),p=i[0],h=d[0];p&&p.data_fill&&(l=L(l,p,t,n));var v=s()({},h.seriesConfig,{type:"pie",radius:"50%",center:["50%","50%"],startAngle:180,label:{show:!0,formatter:"{b}\n{d}%"},labelLine:{length:12,length2:16,smooth:.3},itemStyle:{borderWidth:1,borderColor:"#fff"},data:[]});if(!p&&d.length>0?v.data=d.map(function(e){return{name:e.alias,value:l[0][e.alias]}}):p&&h&&(v.data=l.map(function(e){return{name:e[p.alias]||"-",value:e[h.alias]}})),v.data.length>u){var f=x()(v.data.splice(u-1).map(function(e){return e.value}));v.data.push({name:"\u5176\u4ed6",value:f})}return{series:[v]}}}}]);